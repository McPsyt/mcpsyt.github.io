(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{896:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(5203),n=r(5695),c=r(2115),o=r(6017),l=r(1115),i=r(8402),d=r(1154),u=r(1362);function p(e){let{children:t}=e,r=(0,n.useSearchParams)().get("token"),[p]=(0,c.useState)(()=>{try{var e;if(!r&&!(null===(e=s.e.getState())||void 0===e?void 0:e.token))return null;if(r){let[e,t]=JSON.parse((0,o.D4)(r));s.e.setState({subjectId:e,token:t})}return!0}catch(e){console.error("Error: ".concat(e))}return null}),{token:f,subjectId:h}=s.e.useState(),b=(0,c.useContext)(i.Z),[g,v]=(0,c.useState)(!0),k=(0,n.useRouter)(),{setTheme:m}=(0,u.D)();return((0,c.useEffect)(()=>{p&&(console.log("useEffect ok",h,f,b),(0,l.Zy)((0,l.KR)(b,"".concat(f,"/").concat(h,"/page")),e=>{let t=e.val();console.log("useEffect page",t),t&&k.replace("/part/".concat(t))}),(0,l.Zy)((0,l.KR)(b,"".concat(f,"/").concat(h,"/darkMode")),e=>{m(e.val()?"dark":"light")}),(0,l.Zy)((0,l.KR)(b,"".concat(f,"/").concat(h,"/waiting")),e=>{let t=e.val();console.log("useEffect waiting",t),v(t)}))},[p,b,f,h]),p)?g?(0,a.jsx)("div",{className:"grid w-screen h-screen place-content-center",children:(0,a.jsxs)("span",{className:"text-lg",children:["Please wait... ",(0,a.jsx)(d.A,{className:"animate-spin inline-block",size:30})]})}):(0,a.jsx)("div",{className:"w-screen h-screen relative flex justify-center",children:t}):(0,a.jsx)("div",{children:"Error! Not authorized."})}},1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5203:(e,t,r)=>{"use strict";r.d(t,{e:()=>l});var a=r(2421),s=r(5521),n=r(6786),c=r(1603);let o=()=>({subjectId:"",token:"",lang:"en",darkMode:!1,participantURL:""}),l={_store:(0,a.y)((0,n.Zr)(o,{name:"main-store"})),clear(){this._store.setState(o(),!0)},setState(e){this._store.setState(e)},getState(){return this._store.getState()},useState(){return(0,s.P)(this._store,(0,c.k)(e=>({subjectId:e.subjectId,lang:e.lang,token:e.token,darkMode:e.darkMode,participantURL:e.participantURL})))}}},7684:(e,t,r)=>{Promise.resolve().then(r.bind(r,896))},8402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,FirebaseProvider:()=>u});var a=r(5155),s=r(5028),n=r(2115),c=r(3915),o=r(1115);let l={apiKey:"AIzaSyBPfVnzuVG20F73tHLBQNmQ5Zbtz6d5SYU",authDomain:"qsb-project-df351.firebaseapp.com",projectId:"qsb-project-df351",storageBucket:"qsb-project-df351.firebasestorage.app",messagingSenderId:"338824344625",appId:"1:338824344625:web:06697bee836f15936bd110",measurementId:"G-NDWMLZVGLF",databaseURL:"https://qsb-project-df351-default-rtdb.firebaseio.com"},i=(0,n.createContext)(null);function d(e){let{children:t}=e,[r]=n.useState(()=>{try{let e=(0,c.Wp)(l);return(0,o.C3)(e)}catch(e){console.error("FirebaseProvider Error: ".concat(e))}return null});return r?(0,a.jsx)(i.Provider,{value:r,children:t}):(0,a.jsx)("div",{children:"Error! Cannot to database."})}let u=(0,s.default)(()=>Promise.resolve(d),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[507,138,93,90,441,684,358],()=>t(7684)),_N_E=e.O()}]);