(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{3819:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FirebaseTest:()=>f,Redirect:()=>h,StopWatch:()=>S,Timer:()=>p});var a=r(5155),s=r(5695),n=r(2115),o=r(3248),c=r(3052),i=r(8402),u=r(1115),l=r(5203);async function d(e,t,r){let a=Date.now(),s={subjectId:e,createdAt:new Date(a).toISOString(),createdAtLocal:new Date(a).toLocaleString("sv"),page:r};200!=(await fetch("".concat("https://l4uv3wn4j1.execute-api.ca-central-1.amazonaws.com","/event"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(s)})).status&&console.log("Event API failed.")}function f(){let[e,t]=(0,n.useState)(123),{token:r}=l.e.useState(),s=(0,n.useContext)(i.Z);return(0,n.useEffect)(()=>{let e=(0,u.KR)(s,"".concat(r,"/test"));(0,u.Zy)(e,e=>{t(e.val())})},[s,r]),(0,a.jsxs)("div",{children:["Data: ",e]})}function h(e){let{keyPress:t,to:r}=e,{subjectId:o,lang:f,token:h}=l.e.useState(),p=(0,n.useContext)(i.Z),S=(0,s.useRouter)();async function b(){await d(o,h,r),(0,u.hZ)((0,u.KR)(p,"".concat(h,"/").concat(o,"/page")),"".concat(f,"/").concat(r)),S.push(r)}let m=(0,n.useRef)(null),v=(0,n.useRef)(null);return(0,n.useEffect)(()=>{t&&(m.current=Array.isArray(t)?t:[t],v.current=b)}),(0,n.useEffect)(()=>{if(m.current)return document.addEventListener("keyup",e),()=>{document.removeEventListener("keyup",e)};function e(e){m.current.includes(e.key)&&v.current(e)}},[]),(0,a.jsx)("div",{className:"absolute right-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:b,children:(0,a.jsx)(c.A,{size:30})})}function p(e){let{duration:t,endText:r}=e,[s,c]=(0,n.useState)(!1),{totalSeconds:i,seconds:u}=(0,o.useTimer)({expiryTimestamp:new Date(Date.now()+1e3*t),onExpire:()=>c(!0)});return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)("div",{className:"w-full text-center",children:r}),!s&&(0,a.jsxs)("div",{className:"absolute bottom-2 right-4 z-20",children:[i,"s"]})]})}function S(){let{seconds:e,minutes:t,hours:r,start:s}=(0,o.useStopwatch)({autoStart:!1});return(0,n.useEffect)(()=>{s()},[]),(0,a.jsxs)("div",{className:"absolute top-2 right-2 text-2xl z-20",children:[r.toString().padStart(2,"0"),":",t.toString().padStart(2,"0"),":",e.toString().padStart(2,"0")]})}},4282:(e,t,r)=>{Promise.resolve().then(r.bind(r,3819)),Promise.resolve().then(r.t.bind(r,3063,23))},5203:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var a=r(2421),s=r(5521),n=r(6786),o=r(1603);let c=()=>({subjectId:"",token:"",lang:"en",darkMode:!1}),i={_store:(0,a.y)((0,n.Zr)(c,{name:"main-store"})),clear(){this._store.setState(c(),!0)},setState(e){this._store.setState(e)},getState(){return this._store.getState()},useState(){return(0,s.P)(this._store,(0,o.k)(e=>({subjectId:e.subjectId,lang:e.lang,token:e.token,darkMode:e.darkMode})))}}},8402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d,FirebaseProvider:()=>h});var a=r(5155),s=r(5028),n=r(2115),o=r(5695),c=r(3915),i=r(1115);let u={apiKey:"AIzaSyBPfVnzuVG20F73tHLBQNmQ5Zbtz6d5SYU",authDomain:"qsb-project-df351.firebaseapp.com",projectId:"qsb-project-df351",storageBucket:"qsb-project-df351.firebasestorage.app",messagingSenderId:"338824344625",appId:"1:338824344625:web:06697bee836f15936bd110",measurementId:"G-NDWMLZVGLF",databaseURL:"https://qsb-project-df351-default-rtdb.firebaseio.com"};var l=r(5203);let d=(0,n.createContext)(null);function f(e){let{children:t}=e,r=(0,o.useSearchParams)().get("token"),[s]=n.useState(()=>{try{var e;if(!r&&!(null===(e=l.e.getState())||void 0===e?void 0:e.token))return null;r&&l.e.setState({token:r}),l.e.setState({subjectId:""});let t=(0,c.Wp)(u);return(0,i.C3)(t)}catch(e){console.error("FirebaseProvider Error: ".concat(e))}return null});return s?(0,a.jsx)(d.Provider,{value:s,children:t}):(0,a.jsx)("div",{children:"Error! Cannot to database."})}let h=(0,s.default)(()=>Promise.resolve(f),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[507,645,521,441,684,358],()=>t(4282)),_N_E=e.O()}]);