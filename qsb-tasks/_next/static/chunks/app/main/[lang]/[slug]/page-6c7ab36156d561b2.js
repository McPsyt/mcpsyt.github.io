(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{2714:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(5155);a(2115);var s=a(968),n=a(3999);function i(e){let{className:t,...a}=e;return(0,r.jsx)(s.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4282:(e,t,a)=>{Promise.resolve().then(a.bind(a,6150)),Promise.resolve().then(a.t.bind(a,3063,23))},5203:(e,t,a)=>{"use strict";a.d(t,{e:()=>c});var r=a(2421),s=a(5521),n=a(6786),i=a(1603);let o=()=>({subjectId:"",token:"",lang:"en",darkMode:!1}),c={_store:(0,r.y)((0,n.Zr)(o,{name:"main-store"})),clear(){this._store.setState(o(),!0)},setState(e){this._store.setState(e)},getState(){return this._store.getState()},useState(){return(0,s.P)(this._store,(0,i.k)(e=>({subjectId:e.subjectId,lang:e.lang,token:e.token,darkMode:e.darkMode})))}}},5747:(e,t,a)=>{"use strict";a.d(t,{C:()=>c,z:()=>o});var r=a(5155);a(2115);var s=a(3882),n=a(9428),i=a(3999);function o(e){let{className:t,...a}=e;return(0,r.jsx)(s.bL,{"data-slot":"radio-group",className:(0,i.cn)("grid gap-3",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(s.q7,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(s.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},6150:(e,t,a)=>{"use strict";a.r(t),a.d(t,{FirebaseTest:()=>b,NoWait:()=>m,Redirect:()=>f,StartSession:()=>j,StopWatch:()=>y,Timer:()=>w,WaitBlock:()=>S});var r=a(5155),s=a(5695),n=a(2115),i=a(3248),o=a(2355),c=a(3052),l=a(1154),d=a(8402),u=a(1115),h=a(5203);async function v(e,t,a){let r=Date.now(),s={subjectId:e,createdAt:new Date(r).toISOString(),createdAtLocal:new Date(r).toLocaleString("sv"),data:a};200!=(await fetch("".concat("https://l4uv3wn4j1.execute-api.ca-central-1.amazonaws.com","/event"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(s)})).status&&console.log("Event API failed.")}var g=a(7168),p=a(2714),x=a(5747);function b(){let[e,t]=(0,n.useState)(123),{token:a}=h.e.useState(),s=(0,n.useContext)(d.Z);return(0,n.useEffect)(()=>{let e=(0,u.KR)(s,"".concat(a,"/test"));(0,u.Zy)(e,e=>{t(e.val())})},[s,a]),(0,r.jsxs)("div",{children:["Data: ",e]})}function f(e){let{keyPress:t,to:a,back:i}=e,{subjectId:l,lang:g,token:p}=h.e.useState(),x=(0,n.useContext)(d.Z),b=(0,s.useRouter)();async function f(){(0,u.hZ)((0,u.KR)(x,"".concat(p,"/").concat(l,"/waiting")),!0),(0,u.hZ)((0,u.KR)(x,"".concat(p,"/").concat(l,"/page")),"".concat(g,"/").concat(a)),await v(l,p,{page:a,type:"PageChange"}),b.push(a)}return i?(0,r.jsx)("div",{className:"absolute left-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:f,children:(0,r.jsx)(o.A,{size:30})}):(0,r.jsx)("div",{className:"absolute right-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:f,children:(0,r.jsx)(c.A,{size:30})})}function m(){let{subjectId:e,token:t}=h.e.useState(),a=(0,n.useContext)(d.Z),r=(0,s.usePathname)();return(0,n.useEffect)(()=>{r.startsWith("/part")||(0,u.hZ)((0,u.KR)(a,"".concat(t,"/").concat(e,"/waiting")),!1)},[]),null}function j(){let{subjectId:e,token:t,lang:a}=h.e.useState(),[i,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1);async function b(){await v(e,t,{videoSide:i,type:"Start-Session"}),u(!0)}return((0,n.useContext)(d.Z),(0,s.usePathname)().startsWith("/part"))?(0,r.jsx)("div",{className:"grid w-screen h-screen place-content-center",children:(0,r.jsxs)("span",{className:"text-lg",children:["en"==a?"Session will start soon...":"La session va bient\xf4t commencer...",(0,r.jsx)(l.A,{className:"animate-spin inline-block",size:30})]})}):(0,r.jsxs)("div",{className:"p-2 rounded flex flex-col items-center gap-8",children:[(0,r.jsxs)("div",{className:"flex w-full max-w-lg items-center gap-4 text-5xl",children:[(0,r.jsx)(p.J,{htmlFor:"videoSide",children:"Which side Participant video appears on Zoom?"}),(0,r.jsxs)(x.z,{id:"videoSide",value:i,className:"flex gap-4",onValueChange:e=>o(e),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.C,{value:"left",id:"r1"}),(0,r.jsx)(p.J,{htmlFor:"r1",children:"Left"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.C,{value:"right",id:"r2"}),(0,r.jsx)(p.J,{htmlFor:"r2",children:"Right"})]})]})]}),(0,r.jsx)(g.$,{variant:"default",onClick:b,className:"w-fit",disabled:c,children:c?"Done":"Save"}),(0,r.jsx)("div",{className:"font-bold text-2xl",children:"Please start Zoom recording!"})]})}function S(e){let{children:t,name:a}=e,{subjectId:i,token:o}=h.e.useState(),c=(0,n.useContext)(d.Z),l=(0,s.usePathname)(),[p,x]=(0,n.useState)(!0);async function b(){(0,u.hZ)((0,u.KR)(c,"".concat(o,"/").concat(i,"/waiting")),!1),await v(i,o,{name:a,type:"Marker"}),x(!1)}return l.startsWith("/part")?null:p?(0,r.jsxs)("div",{className:"text-red-500 border-2 border-amber-400 p-2 rounded flex flex-col items-center bg-white mb-8",children:["Click the button below to continue:",(0,r.jsx)(g.$,{variant:"default",onClick:b,className:"w-fit",children:"Show Page"})]}):null}function w(e){let{duration:t,endText:a}=e,[s,o]=(0,n.useState)(!1),{totalSeconds:c,seconds:l}=(0,i.useTimer)({expiryTimestamp:new Date(Date.now()+1e3*t),onExpire:()=>o(!0)});return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)("div",{className:"w-full text-center",children:a}),!s&&(0,r.jsxs)("div",{className:"absolute bottom-2 right-4 z-20",children:[c,"s"]})]})}function y(){let{seconds:e,minutes:t,hours:a,start:s}=(0,i.useStopwatch)({autoStart:!1});return(0,n.useEffect)(()=>{s()},[]),(0,r.jsxs)("div",{className:"absolute top-2 right-2 text-2xl z-20",children:[a.toString().padStart(2,"0"),":",t.toString().padStart(2,"0"),":",e.toString().padStart(2,"0")]})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var r=a(5155);a(2115);var s=a(9708),n=a(2085),i=a(3999);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:n,asChild:c=!1,...l}=e,d=c?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:t})),...l})}},8402:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u,FirebaseProvider:()=>v});var r=a(5155),s=a(5028),n=a(2115),i=a(5695),o=a(3915),c=a(1115);let l={apiKey:"AIzaSyBPfVnzuVG20F73tHLBQNmQ5Zbtz6d5SYU",authDomain:"qsb-project-df351.firebaseapp.com",projectId:"qsb-project-df351",storageBucket:"qsb-project-df351.firebasestorage.app",messagingSenderId:"338824344625",appId:"1:338824344625:web:06697bee836f15936bd110",measurementId:"G-NDWMLZVGLF",databaseURL:"https://qsb-project-df351-default-rtdb.firebaseio.com"};var d=a(5203);let u=(0,n.createContext)(null);function h(e){let{children:t}=e,a=(0,i.useSearchParams)().get("token"),[s]=n.useState(()=>{try{var e;if(!a&&!(null===(e=d.e.getState())||void 0===e?void 0:e.token))return null;a&&d.e.setState({token:a}),d.e.setState({subjectId:""});let t=(0,o.Wp)(l);return(0,c.C3)(t)}catch(e){console.error("FirebaseProvider Error: ".concat(e))}return null});return s?(0,r.jsx)(u.Provider,{value:s,children:t}):(0,r.jsx)("div",{children:"Error! Cannot to database."})}let v=(0,s.default)(()=>Promise.resolve(h),{ssr:!1})}},e=>{var t=t=>e(e.s=t);e.O(0,[507,645,470,864,441,684,358],()=>t(4282)),_N_E=e.O()}]);