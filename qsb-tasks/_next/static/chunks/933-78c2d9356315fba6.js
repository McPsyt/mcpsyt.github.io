"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{2714:(e,t,a)=>{a.d(t,{J:()=>i});var s=a(5155);a(2115);var r=a(968),n=a(3999);function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},4933:(e,t,a)=>{a.r(t),a.d(t,{CopyBtn:()=>D,FirebaseTest:()=>w,IntOnly:()=>Z,NoWait:()=>N,Redirect:()=>y,StartSession:()=>z,StopWatch:()=>P,Timer:()=>E,TimerTask5:()=>A,WaitBlock:()=>C});var s=a(5155),r=a(5695),n=a(2115),i=a(3248),o=a(2355),c=a(3052),l=a(1154),d=a(8402),u=a(1115),p=a(5203);async function h(e,t,a){let s=Date.now(),r={subjectId:e,createdAt:new Date(s).toISOString(),createdAtLocal:new Date(s).toLocaleString("sv"),data:a};200!=(await fetch("".concat("https://l4uv3wn4j1.execute-api.ca-central-1.amazonaws.com","/event"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(r)})).status&&console.log("Event API failed.")}var x=a(7168),g=a(2714),v=a(5747),f=a(5196),m=a(2650),b=a(3999);async function j(e){navigator.clipboard.writeText(e)}function S(e){let{value:t,className:a,variant:r="ghost",...i}=e,[o,c]=n.useState(!1);return n.useEffect(()=>{setTimeout(()=>{c(!1)},2e3)},[o]),(0,s.jsxs)(x.$,{size:"icon",variant:r,className:(0,b.cn)("relative z-10 h-9 w-9 text-zinc-700 dark:text-white [&_svg]:h-8 [&_svg]:w-8",a),onClick:()=>{j(t),c(!0)},...i,children:[(0,s.jsx)("span",{className:"sr-only",children:"Copy"}),o?(0,s.jsx)(f.A,{}):(0,s.jsx)(m.A,{})]})}function w(){let[e,t]=(0,n.useState)(123),{token:a}=p.e.useState(),r=(0,n.useContext)(d.Z);return(0,n.useEffect)(()=>{let e=(0,u.KR)(r,"".concat(a,"/test"));(0,u.Zy)(e,e=>{t(e.val())})},[r,a]),(0,s.jsxs)("div",{children:["Data: ",e]})}function y(e){let{keyPress:t,to:a,back:i}=e,{subjectId:l,lang:x,token:g}=p.e.useState(),v=(0,n.useContext)(d.Z),f=(0,r.useRouter)();async function m(){(0,u.hZ)((0,u.KR)(v,"".concat(g,"/").concat(l,"/waiting")),!0),(0,u.hZ)((0,u.KR)(v,"".concat(g,"/").concat(l,"/page")),"".concat(x,"/").concat(a)),await h(l,g,{page:a,type:"PageChange"}),f.replace(a)}return i?(0,s.jsx)("div",{className:"absolute left-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:m,children:(0,s.jsx)(o.A,{size:30})}):(0,s.jsx)("div",{className:"absolute right-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:m,children:(0,s.jsx)(c.A,{size:30})})}function N(){let{subjectId:e,token:t}=p.e.useState(),a=(0,n.useContext)(d.Z),s=(0,r.usePathname)();return(0,n.useEffect)(()=>{s.startsWith("/part")||(0,u.hZ)((0,u.KR)(a,"".concat(t,"/").concat(e,"/waiting")),!1)},[]),null}var k=function(e){return e[e.UNSAVED=0]="UNSAVED",e[e.SAVING=1]="SAVING",e[e.DONE=2]="DONE",e}(k||{});function z(){let{subjectId:e,token:t,lang:a}=p.e.useState(),[i,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(0);async function f(){u(1),await h(e,t,{videoSide:i,lang:a,type:"Start-Session"}),u(2)}return((0,n.useContext)(d.Z),(0,r.usePathname)().startsWith("/part"))?(0,s.jsx)("div",{className:"grid w-screen h-screen place-content-center",children:(0,s.jsxs)("span",{className:"text-lg",children:["en"==a?"Session will start soon...":"La session va bient\xf4t commencer...",(0,s.jsx)(l.A,{className:"animate-spin inline-block",size:30})]})}):(0,s.jsxs)("div",{className:"p-2 rounded flex flex-col items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex w-full max-w-lg items-center gap-4 text-5xl",children:[(0,s.jsx)(g.J,{htmlFor:"videoSide",children:"Which side Participant video appears on Zoom?"}),(0,s.jsxs)(v.z,{id:"videoSide",value:i,className:"flex gap-4",onValueChange:e=>o(e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v.C,{value:"left",id:"r1"}),(0,s.jsx)(g.J,{htmlFor:"r1",children:"Left"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v.C,{value:"right",id:"r2"}),(0,s.jsx)(g.J,{htmlFor:"r2",children:"Right"})]})]})]}),(0,s.jsx)(x.$,{variant:"default",onClick:f,className:"w-fit",disabled:0!=c,children:2==c?"Done":0==c?"Save":(0,s.jsx)(l.A,{className:"animate-spin inline-block",size:30})}),(0,s.jsx)("div",{className:"font-bold text-2xl",children:"Please start Zoom recording!"})]})}function C(e){let{children:t,name:a}=e,{subjectId:i,token:o}=p.e.useState(),c=(0,n.useContext)(d.Z),l=(0,r.usePathname)(),[g,v]=(0,n.useState)(!0);async function f(){(0,u.hZ)((0,u.KR)(c,"".concat(o,"/").concat(i,"/waiting")),!1),await h(i,o,{name:a,type:"Marker"}),v(!1)}return l.startsWith("/part")?null:g?(0,s.jsxs)("div",{className:"text-red-500 border-2 border-amber-400 p-2 rounded flex flex-col items-center bg-white mb-8",children:["Click the button below to continue:",(0,s.jsx)(x.$,{variant:"default",onClick:f,className:"w-fit",children:"Show Page"})]}):null}function Z(e){let{children:t}=e,a=(0,r.usePathname)(),{subjectId:s,token:i}=p.e.useState(),o=(0,n.useContext)(d.Z),[c,l]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(0,u.Zy)((0,u.KR)(o,"".concat(i,"/").concat(s,"/waiting")),e=>{let t=e.val();console.log("useEffect waiting",t),t||l(!1)})},[]),a.startsWith("/part")?null:c?t:null}function E(e){let{duration:t,endText:a}=e,[r,o]=(0,n.useState)(!1),{totalSeconds:c,seconds:l}=(0,i.useTimer)({expiryTimestamp:new Date(Date.now()+1e3*t),onExpire:()=>o(!0)});return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("div",{className:"w-full text-center",children:a}),!r&&(0,s.jsxs)("div",{className:"absolute bottom-2 right-4 z-20",children:[c,"s"]})]})}function A(e){let{duration:t,endText:a}=e,[r,o]=(0,n.useState)(!1),{subjectId:c,token:l}=p.e.useState(),h=(0,n.useContext)(d.Z),[x,g]=(0,n.useState)(!0),{totalSeconds:v,seconds:f,start:m}=(0,i.useTimer)({autoStart:!1,expiryTimestamp:new Date(Date.now()+1e3*t),onExpire:()=>o(!0)});return((0,n.useEffect)(()=>{(0,u.Zy)((0,u.KR)(h,"".concat(l,"/").concat(c,"/waiting")),e=>{let t=e.val();console.log("useEffect waiting",t),t||(g(!1),m())})},[]),x)?null:(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("div",{className:"absolute top-1/2 left-[100px]",children:a}),!r&&(0,s.jsxs)("div",{className:"absolute bottom-2 right-4 z-20",children:[v,"s"]})]})}function P(){let{seconds:e,minutes:t,hours:a,start:r}=(0,i.useStopwatch)({autoStart:!1});return(0,n.useEffect)(()=>{r()},[]),(0,s.jsxs)("div",{className:"absolute top-2 right-2 text-2xl z-20",children:[a.toString().padStart(2,"0"),":",t.toString().padStart(2,"0"),":",e.toString().padStart(2,"0")]})}function D(){let{participantURL:e}=p.e.useState();return(0,s.jsx)(S,{value:e,variant:"outline",type:"button",className:"absolute top-4 left-8 text-2xl z-20"})}},5203:(e,t,a)=>{a.d(t,{e:()=>c});var s=a(2421),r=a(5521),n=a(6786),i=a(1603);let o=()=>({subjectId:"",token:"",lang:"en",darkMode:!1,participantURL:""}),c={_store:(0,s.y)((0,n.Zr)(o,{name:"main-store"})),clear(){this._store.setState(o(),!0)},setState(e){this._store.setState(e)},getState(){return this._store.getState()},useState(){return(0,r.P)(this._store,(0,i.k)(e=>({subjectId:e.subjectId,lang:e.lang,token:e.token,darkMode:e.darkMode,participantURL:e.participantURL})))}}},5747:(e,t,a)=>{a.d(t,{C:()=>c,z:()=>o});var s=a(5155);a(2115);var r=a(3882),n=a(9428),i=a(3999);function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"radio-group",className:(0,i.cn)("grid gap-3",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.q7,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(r.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},7168:(e,t,a)=>{a.d(t,{$:()=>c});var s=a(5155);a(2115);var r=a(9708),n=a(2085),i=a(3999);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:n,asChild:c=!1,...l}=e,d=c?r.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:n,className:t})),...l})}},8402:(e,t,a)=>{a.d(t,{Z:()=>l,FirebaseProvider:()=>u});var s=a(5155),r=a(5028),n=a(2115),i=a(3915),o=a(1115);let c={apiKey:"AIzaSyBPfVnzuVG20F73tHLBQNmQ5Zbtz6d5SYU",authDomain:"qsb-project-df351.firebaseapp.com",projectId:"qsb-project-df351",storageBucket:"qsb-project-df351.firebasestorage.app",messagingSenderId:"338824344625",appId:"1:338824344625:web:06697bee836f15936bd110",measurementId:"G-NDWMLZVGLF",databaseURL:"https://qsb-project-df351-default-rtdb.firebaseio.com"},l=(0,n.createContext)(null);function d(e){let{children:t}=e,[a]=n.useState(()=>{try{let e=(0,i.Wp)(c);return(0,o.C3)(e)}catch(e){console.error("FirebaseProvider Error: ".concat(e))}return null});return a?(0,s.jsx)(l.Provider,{value:a,children:t}):(0,s.jsx)("div",{children:"Error! Cannot to database."})}let u=(0,r.default)(()=>Promise.resolve(d),{ssr:!1})}}]);