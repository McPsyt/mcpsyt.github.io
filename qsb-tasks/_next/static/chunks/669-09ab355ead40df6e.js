"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{2714:(e,t,a)=>{a.d(t,{J:()=>i});var n=a(5155);a(2115);var s=a(968),r=a(3999);function i(e){let{className:t,...a}=e;return(0,n.jsx)(s.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{a.d(t,{cn:()=>r});var n=a(2596),s=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}},5050:(e,t,a)=>{a.r(t),a.d(t,{CopyBtn:()=>T,FirebaseTest:()=>D,IntOnly:()=>F,MarkerModal:()=>L,Redirect:()=>_,StartSession:()=>Z,StopWatch:()=>O,Timer:()=>R,WaitBlock:()=>I});var n=a(5155),s=a(5695),r=a(2115),i=a(3248),o=a(2355),l=a(3052),c=a(1154),d=a(8402),u=a(1115),p=a(5203);async function x(e,t,a){let n=Date.now();a.version=2;let s={subjectId:e,createdAt:new Date(n).toISOString(),createdAtLocal:new Date(n).toLocaleString("sv"),data:a};200!=(await fetch("".concat("https://l4uv3wn4j1.execute-api.ca-central-1.amazonaws.com","/event"),{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify(s)})).status&&console.log("Event API failed.")}var g=a(7168),h=a(2714),f=a(5747),m=a(5196),v=a(2650),b=a(3999);async function j(e){navigator.clipboard.writeText(e)}function y(e){let{value:t,className:a,variant:s="ghost",...i}=e,[o,l]=r.useState(!1);return r.useEffect(()=>{setTimeout(()=>{l(!1)},2e3)},[o]),(0,n.jsxs)(g.$,{size:"icon",variant:s,className:(0,b.cn)("relative z-10 h-9 w-9 text-zinc-700 dark:text-white [&_svg]:h-8 [&_svg]:w-8",a),onClick:()=>{j(t),l(!0)},...i,children:[(0,n.jsx)("span",{className:"sr-only",children:"Copy"}),o?(0,n.jsx)(m.A,{}):(0,n.jsx)(v.A,{})]})}var N=a(7353),w=a(4416);function S(e){let{...t}=e;return(0,n.jsx)(N.bL,{"data-slot":"dialog",...t})}function k(e){let{...t}=e;return(0,n.jsx)(N.ZL,{"data-slot":"dialog-portal",...t})}function z(e){let{className:t,...a}=e;return(0,n.jsx)(N.hJ,{"data-slot":"dialog-overlay",className:(0,b.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function C(e){let{className:t,children:a,showCloseButton:s=!0,...r}=e;return(0,n.jsxs)(k,{"data-slot":"dialog-portal",children:[(0,n.jsx)(z,{}),(0,n.jsxs)(N.UC,{"data-slot":"dialog-content",className:(0,b.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...r,children:[a,s&&(0,n.jsxs)(N.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,n.jsx)(w.A,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function P(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:(0,b.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function A(e){let{className:t,...a}=e;return(0,n.jsx)(N.hE,{"data-slot":"dialog-title",className:(0,b.cn)("text-lg leading-none font-semibold",t),...a})}function D(){let[e,t]=(0,r.useState)(123),{token:a}=p.e.useState(),s=(0,r.useContext)(d.Z);return(0,r.useEffect)(()=>{let e=(0,u.KR)(s,"".concat(a,"/test")),n=(0,u.Zy)(e,e=>{t(e.val())});return()=>n()},[s,a]),(0,n.jsxs)("div",{children:["Data: ",e]})}function _(e){let{keyPress:t,to:a,back:i}=e,{subjectId:c,lang:g,token:h}=p.e.useState(),f=(0,r.useContext)(d.Z),m=(0,s.useRouter)();async function v(){(0,u.hZ)((0,u.KR)(f,"".concat(h,"/").concat(c,"/page")),"".concat(g,"/").concat(a)),await x(c,h,{page:a,type:"PageChange"}),m.replace(a)}return i?(0,n.jsx)("div",{className:"absolute left-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:v,children:(0,n.jsx)(o.A,{size:30})}):(0,n.jsx)("div",{className:"absolute right-0 h-full w-[50px] grid place-content-center hover:bg-gray-200 z-10",onClick:v,children:(0,n.jsx)(l.A,{size:30})})}var E=function(e){return e[e.UNSAVED=0]="UNSAVED",e[e.SAVING=1]="SAVING",e[e.DONE=2]="DONE",e}(E||{});function Z(){let{subjectId:e,token:t,lang:a}=p.e.useState(),[i,o]=(0,r.useState)(""),[l,u]=(0,r.useState)(!1),[m,v]=(0,r.useState)(0);async function b(){if("left"!=i&&"right"!=i){u(!0);return}v(1),await x(e,t,{videoSide:i,lang:a,type:"Start-Session"}),v(2)}return((0,r.useContext)(d.Z),(0,s.usePathname)().startsWith("/part"))?(0,n.jsx)("div",{className:"grid w-screen h-screen place-content-center",children:(0,n.jsxs)("span",{className:"text-lg",children:["en"==a?"Session will start soon...":"La session va bient\xf4t commencer...",(0,n.jsx)(c.A,{className:"animate-spin inline-block",size:30})]})}):(0,n.jsxs)("div",{className:"p-2 rounded flex flex-col items-center gap-8",children:[(0,n.jsxs)("div",{className:"flex w-full max-w-lg items-center gap-4 text-5xl",children:[(0,n.jsx)(h.J,{htmlFor:"videoSide",children:"Which side Participant video appears on Zoom?"}),(0,n.jsxs)("div",{className:"relative inline-block",children:[l&&(0,n.jsx)("span",{"aria-hidden":!0,className:"absolute inset-0 rounded-md ring-4 ring-destructive animate-pulse pointer-events-none"}),(0,n.jsxs)(f.z,{id:"videoSide",value:i,className:"flex gap-4 rounded-md p-2",onValueChange:e=>{o(e),u(!1)},children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(f.C,{value:"left",id:"r1"}),(0,n.jsx)(h.J,{htmlFor:"r1",children:"Left"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(f.C,{value:"right",id:"r2"}),(0,n.jsx)(h.J,{htmlFor:"r2",children:"Right"})]})]})]})]}),(0,n.jsx)(g.$,{variant:"default",onClick:b,className:"w-fit",disabled:0!=m,children:2==m?"Done":0==m?"Save":(0,n.jsx)(c.A,{className:"animate-spin inline-block",size:30})}),(0,n.jsx)("div",{className:"font-bold text-2xl text-red-600 animate-pulse",children:"Please start Zoom recording!"})]})}function I(e){let{children:t,name:a,afterWait:i}=e,o=(0,s.usePathname)(),{visited:l,markVisited:x}=function(e){let{subjectId:t,token:a}=p.e.useState(),n=(0,r.useContext)(d.Z),[s,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let s=(0,u.Zy)((0,u.KR)(n,"".concat(a,"/").concat(t,"/visitedPages/").concat(e)),e=>{i(e.val())});return()=>s()},[e]),{visited:s,markVisited:s=>{(0,u.hZ)((0,u.KR)(n,"".concat(a,"/").concat(t,"/visitedPages/").concat(e)),s)}}}(a);async function h(){x(!0)}return o.startsWith("/part")?l?(0,n.jsxs)(n.Fragment,{children:[t,i]}):(0,n.jsx)("div",{className:"grid w-screen h-screen place-content-center",children:(0,n.jsxs)("span",{className:"text-lg",children:["Please wait... ",(0,n.jsx)(c.A,{className:"animate-spin inline-block",size:30})]})}):l?(0,n.jsxs)(n.Fragment,{children:[t,i]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-red-500 border-2 border-amber-400 p-2 rounded flex flex-col items-center bg-white mb-8",children:["Click the button below to continue:",(0,n.jsx)(g.$,{variant:"default",onClick:h,className:"w-fit",children:"Show Page"})]}),t]})}function L(e){let{name:t}=e,{subjectId:a,token:i}=p.e.useState(),[o,l]=(0,r.useState)(!0);async function c(){await x(a,i,{name:t,type:"Marker"}),l(!1)}return(0,s.usePathname)().startsWith("/part")?null:(0,n.jsx)(S,{open:o,onOpenChange:l,children:(0,n.jsxs)(C,{className:"translate-y-[-150%]",showCloseButton:!1,onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault(),children:[(0,n.jsx)(P,{children:(0,n.jsxs)(A,{className:"text-center",children:["Is participant ready for ",t," ?"]})}),(0,n.jsxs)("div",{className:"flex gap-4 justify-around mt-4",children:[(0,n.jsx)(g.$,{type:"button",variant:"destructive",onClick:c,children:"Mark Timestamp"}),(0,n.jsx)(g.$,{type:"button",variant:"outline",onClick:()=>{l(!1)},children:"DO NOT Mark"})]})]})})}function F(e){let{children:t}=e;return(0,s.usePathname)().startsWith("/part")?null:t}function R(e){let{duration:t,endText:a,textOnLeft:s=!1,animate:o=!0}=e,[l,c]=(0,r.useState)(!1),{totalSeconds:d,seconds:u}=(0,i.useTimer)({expiryTimestamp:new Date(Date.now()+1e3*t),onExpire:()=>c(!0)});return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)("div",{className:"".concat(s?"absolute top-1/2 left-[100px]":"w-full text-center"," text-red-600 ").concat(o?"animate-pulse":""),children:a}),!l&&(0,n.jsxs)("div",{className:"absolute bottom-2 right-4 z-20",children:[d,"s"]})]})}function O(){let{seconds:e,minutes:t,hours:a,start:s}=(0,i.useStopwatch)({autoStart:!1});return(0,r.useEffect)(()=>{s()},[]),(0,n.jsxs)("div",{className:"absolute top-2 right-2 text-2xl z-20",children:[a.toString().padStart(2,"0"),":",t.toString().padStart(2,"0"),":",e.toString().padStart(2,"0")]})}function T(){let{participantURL:e}=p.e.useState();return(0,n.jsx)(y,{value:e,variant:"outline",type:"button",className:"absolute top-4 left-8 text-2xl z-20"})}},5203:(e,t,a)=>{a.d(t,{e:()=>l});var n=a(2421),s=a(5521),r=a(6786),i=a(1603);let o=()=>({subjectId:"",token:"",lang:"en",darkMode:!1,participantURL:""}),l={_store:(0,n.y)((0,r.Zr)(o,{name:"main-store"})),clear(){this._store.setState(o(),!0)},setState(e){this._store.setState(e)},getState(){return this._store.getState()},useState(){return(0,s.P)(this._store,(0,i.k)(e=>({subjectId:e.subjectId,lang:e.lang,token:e.token,darkMode:e.darkMode,participantURL:e.participantURL})))}}},5747:(e,t,a)=>{a.d(t,{C:()=>l,z:()=>o});var n=a(5155);a(2115);var s=a(1697),r=a(9428),i=a(3999);function o(e){let{className:t,...a}=e;return(0,n.jsx)(s.bL,{"data-slot":"radio-group",className:(0,i.cn)("grid gap-3",t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)(s.q7,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,n.jsx)(s.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,n.jsx)(r.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}},7168:(e,t,a)=>{a.d(t,{$:()=>l});var n=a(5155);a(2115);var s=a(9708),r=a(2085),i=a(3999);let o=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:r,asChild:l=!1,...c}=e,d=l?s.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:r,className:t})),...c})}},8402:(e,t,a)=>{a.d(t,{Z:()=>c,FirebaseProvider:()=>u});var n=a(5155),s=a(5028),r=a(2115),i=a(3915),o=a(1115);let l={apiKey:"AIzaSyBPfVnzuVG20F73tHLBQNmQ5Zbtz6d5SYU",authDomain:"qsb-project-df351.firebaseapp.com",projectId:"qsb-project-df351",storageBucket:"qsb-project-df351.firebasestorage.app",messagingSenderId:"338824344625",appId:"1:338824344625:web:06697bee836f15936bd110",measurementId:"G-NDWMLZVGLF",databaseURL:"https://qsb-project-df351-default-rtdb.firebaseio.com"},c=(0,r.createContext)(null);function d(e){let{children:t}=e,[a]=r.useState(()=>{try{let e=(0,i.Wp)(l);return(0,o.C3)(e)}catch(e){console.error("FirebaseProvider Error: ".concat(e))}return null});return a?(0,n.jsx)(c.Provider,{value:a,children:t}):(0,n.jsx)("div",{children:"Error! Cannot to database."})}let u=(0,s.default)(()=>Promise.resolve(d),{ssr:!1})}}]);